<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
<!-- Generated by rfcdiff 1.46: rfcdiff  --> 
<!-- <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional" > -->
<!-- System: Darwin fielding-MacBookPro1.local 19.6.0 Darwin Kernel Version 19.6.0: Tue Jun 22 19:49:55 PDT 2021; root:xnu-6153.141.35~1/RELEASE_X86_64 x86_64 --> 
<!-- Using awk: /usr/local/bin/gawk: GNU Awk 5.1.0, API: 3.0 (GNU MPFR 4.1.0, GNU MP 6.2.1) --> 
<!-- Using diff: /usr/bin/diff: diff (GNU diffutils) 2.8.1 --> 
<!-- Using wdiff: /usr/local/bin/wdiff: wdiff (GNU wdiff) 1.2.2 --> 
<html xmlns="http://www.w3.org/1999/xhtml"> 
<head> 
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /> 
  <meta http-equiv="Content-Style-Type" content="text/css" /> 
  <title>Diff: draft-ietf-httpbis-cache-17.txt - draft-ietf-httpbis-cache-18.txt</title> 
  <style type="text/css"> 
    body    { margin: 0.4ex; margin-right: auto; } 
    tr      { } 
    td      { white-space: pre; font-family: monospace; vertical-align: top; font-size: 0.86em;} 
    th      { font-size: 0.86em; } 
    .small  { font-size: 0.6em; font-style: italic; font-family: Verdana, Helvetica, sans-serif; } 
    .left   { background-color: #EEE; } 
    .right  { background-color: #FFF; } 
    .diff   { background-color: #CCF; } 
    .lblock { background-color: #BFB; } 
    .rblock { background-color: #FF8; } 
    .insert { background-color: #8FF; } 
    .delete { background-color: #ACF; } 
    .void   { background-color: #FFB; } 
    .cont   { background-color: #EEE; } 
    .linebr { background-color: #AAA; } 
    .lineno { color: red; background-color: #FFF; font-size: 0.7em; text-align: right; padding: 0 2px; } 
    .elipsis{ background-color: #AAA; } 
    .left .cont { background-color: #DDD; } 
    .right .cont { background-color: #EEE; } 
    .lblock .cont { background-color: #9D9; } 
    .rblock .cont { background-color: #DD6; } 
    .insert .cont { background-color: #0DD; } 
    .delete .cont { background-color: #8AD; } 
    .stats, .stats td, .stats th { background-color: #EEE; padding: 2px 0; } 
    span.hide { display: none; color: #aaa;}    a:hover span { display: inline; }    tr.change { background-color: gray; } 
    tr.change a { text-decoration: none; color: black } 
  </style> 
     <script>
var chunk_index = 0;
var old_chunk = null;

function format_chunk(index) {
    var prefix = "diff";
    var str = index.toString();
    for (x=0; x<(4-str.length); ++x) {
        prefix+='0';
    }
    return prefix + str;
}

function find_chunk(n){
    return document.querySelector('tr[id$="' + n + '"]');
}

function change_chunk(offset) {
    var index = chunk_index + offset;
    var new_str;
    var new_chunk;

    new_str = format_chunk(index);
    new_chunk = find_chunk(new_str);
    if (!new_chunk) {
        return;
    }
    if (old_chunk) {
        old_chunk.style.outline = "";
    }
    old_chunk = new_chunk;
    old_chunk.style.outline = "1px solid red";
    window.location.replace("#" + new_str)
    window.scrollBy(0,-100);
    chunk_index = index;
}

document.onkeydown = function(e) {
    switch (e.keyCode) {
    case 78:
        change_chunk(1);
        break;
    case 80:
        change_chunk(-1);
        break;
    }
};
   </script> 
</head> 
<body > 
  <table border="0" cellpadding="0" cellspacing="0"> 
  <tr id="part-1" bgcolor="orange"><th></th><th>&nbsp;draft-ietf-httpbis-cache-17.txt&nbsp;</th><th> </th><th>&nbsp;draft-ietf-httpbis-cache-18.txt&nbsp;</th><th></th></tr> 
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">HTTP Working Group                                      R. Fielding, Ed.</td><td> </td><td class="right">HTTP Working Group                                      R. Fielding, Ed.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">Internet-Draft                                                     Adobe</td><td> </td><td class="right">Internet-Draft                                                     Adobe</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">Obsoletes: 7234 (if approved)                         M. Nottingham, Ed.</td><td> </td><td class="right">Obsoletes: 7234 (if approved)                         M. Nottingham, Ed.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">Intended status: Standards Track                                  Fastly</td><td> </td><td class="right">Intended status: Standards Track                                  Fastly</td><td class="lineno"></td></tr>
      <tr id="diff0001"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">Expires: <span class="delete">27 January 2022 </span>                                J. Reschke, Ed.</td><td> </td><td class="rblock">Expires: <span class="insert">19 February 2022</span>                                J. Reschke, Ed.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">                                                              greenbytes</td><td> </td><td class="right">                                                              greenbytes</td><td class="lineno"></td></tr>
      <tr id="diff0002"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">                                                          <span class="delete">  26 July</span> 2021</td><td> </td><td class="rblock">                                                          <span class="insert">18 August</span> 2021</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">                              HTTP Caching</td><td> </td><td class="right">                              HTTP Caching</td><td class="lineno"></td></tr>
      <tr id="diff0003"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">                      draft-ietf-httpbis-cache-1<span class="delete">7</span></td><td> </td><td class="rblock">                      draft-ietf-httpbis-cache-1<span class="insert">8</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">Abstract</td><td> </td><td class="right">Abstract</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   The Hypertext Transfer Protocol (HTTP) is a stateless application-</td><td> </td><td class="right">   The Hypertext Transfer Protocol (HTTP) is a stateless application-</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   level protocol for distributed, collaborative, hypertext information</td><td> </td><td class="right">   level protocol for distributed, collaborative, hypertext information</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   systems.  This document defines HTTP caches and the associated header</td><td> </td><td class="right">   systems.  This document defines HTTP caches and the associated header</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   fields that control cache behavior or indicate cacheable response</td><td> </td><td class="right">   fields that control cache behavior or indicate cacheable response</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   messages.</td><td> </td><td class="right">   messages.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   This document obsoletes RFC 7234.</td><td> </td><td class="right">   This document obsoletes RFC 7234.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="part-2" class="change" ><td></td><th><small>skipping to change at</small><a href="#part-2"><em> page 1, line 36<span class="hide"> &para;</span></em></a></th><th> </th><th><small>skipping to change at</small><a href="#part-2"><em> page 1, line 36<span class="hide"> &para;</span></em></a></th><td></td></tr>
      <tr><td class="lineno"></td><td class="left">   This note is to be removed before publishing as an RFC.</td><td> </td><td class="right">   This note is to be removed before publishing as an RFC.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Discussion of this draft takes place on the HTTP working group</td><td> </td><td class="right">   Discussion of this draft takes place on the HTTP working group</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   mailing list (ietf-http-wg@w3.org), which is archived at</td><td> </td><td class="right">   mailing list (ietf-http-wg@w3.org), which is archived at</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   &lt;https://lists.w3.org/Archives/Public/ietf-http-wg/&gt;.</td><td> </td><td class="right">   &lt;https://lists.w3.org/Archives/Public/ietf-http-wg/&gt;.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Working Group information can be found at &lt;https://httpwg.org/&gt;;</td><td> </td><td class="right">   Working Group information can be found at &lt;https://httpwg.org/&gt;;</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   source code and issues list for this draft can be found at</td><td> </td><td class="right">   source code and issues list for this draft can be found at</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   &lt;https://github.com/httpwg/http-core&gt;.</td><td> </td><td class="right">   &lt;https://github.com/httpwg/http-core&gt;.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0004"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   The changes in this draft are summarized in Appendix C.1<span class="delete">8</span>.</td><td> </td><td class="rblock">   The changes in this draft are summarized in Appendix C.1<span class="insert">9</span>.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">Status of This Memo</td><td> </td><td class="right">Status of This Memo</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   This Internet-Draft is submitted in full conformance with the</td><td> </td><td class="right">   This Internet-Draft is submitted in full conformance with the</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   provisions of BCP 78 and BCP 79.</td><td> </td><td class="right">   provisions of BCP 78 and BCP 79.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Internet-Drafts are working documents of the Internet Engineering</td><td> </td><td class="right">   Internet-Drafts are working documents of the Internet Engineering</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Task Force (IETF).  Note that other groups may also distribute</td><td> </td><td class="right">   Task Force (IETF).  Note that other groups may also distribute</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   working documents as Internet-Drafts.  The list of current Internet-</td><td> </td><td class="right">   working documents as Internet-Drafts.  The list of current Internet-</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Drafts is at https://datatracker.ietf.org/drafts/current/.</td><td> </td><td class="right">   Drafts is at https://datatracker.ietf.org/drafts/current/.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Internet-Drafts are draft documents valid for a maximum of six months</td><td> </td><td class="right">   Internet-Drafts are draft documents valid for a maximum of six months</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   and may be updated, replaced, or obsoleted by other documents at any</td><td> </td><td class="right">   and may be updated, replaced, or obsoleted by other documents at any</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   time.  It is inappropriate to use Internet-Drafts as reference</td><td> </td><td class="right">   time.  It is inappropriate to use Internet-Drafts as reference</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   material or to cite them other than as "work in progress."</td><td> </td><td class="right">   material or to cite them other than as "work in progress."</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0005"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   This Internet-Draft will expire on <span class="delete">27 Jan</span>uary 2022.</td><td> </td><td class="rblock">   This Internet-Draft will expire on <span class="insert">19 Febr</span>uary 2022.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">Copyright Notice</td><td> </td><td class="right">Copyright Notice</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Copyright (c) 2021 IETF Trust and the persons identified as the</td><td> </td><td class="right">   Copyright (c) 2021 IETF Trust and the persons identified as the</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   document authors.  All rights reserved.</td><td> </td><td class="right">   document authors.  All rights reserved.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   This document is subject to BCP 78 and the IETF Trust's Legal</td><td> </td><td class="right">   This document is subject to BCP 78 and the IETF Trust's Legal</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Provisions Relating to IETF Documents (https://trustee.ietf.org/</td><td> </td><td class="right">   Provisions Relating to IETF Documents (https://trustee.ietf.org/</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   license-info) in effect on the date of publication of this document.</td><td> </td><td class="right">   license-info) in effect on the date of publication of this document.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Please review these documents carefully, as they describe your rights</td><td> </td><td class="right">   Please review these documents carefully, as they describe your rights</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="part-3" class="change" ><td></td><th><small>skipping to change at</small><a href="#part-3"><em> page 3, line 10<span class="hide"> &para;</span></em></a></th><th> </th><th><small>skipping to change at</small><a href="#part-3"><em> page 3, line 10<span class="hide"> &para;</span></em></a></th><td></td></tr>
      <tr><td class="lineno"></td><td class="left">     3.3.  Storing Incomplete Responses  . . . . . . . . . . . . . .  10</td><td> </td><td class="right">     3.3.  Storing Incomplete Responses  . . . . . . . . . . . . . .  10</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">     3.4.  Combining Partial Content . . . . . . . . . . . . . . . .  11</td><td> </td><td class="right">     3.4.  Combining Partial Content . . . . . . . . . . . . . . . .  11</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">     3.5.  Storing Responses to Authenticated Requests . . . . . . .  11</td><td> </td><td class="right">     3.5.  Storing Responses to Authenticated Requests . . . . . . .  11</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   4.  Constructing Responses from Caches  . . . . . . . . . . . . .  11</td><td> </td><td class="right">   4.  Constructing Responses from Caches  . . . . . . . . . . . . .  11</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">     4.1.  Calculating Cache Keys with the Vary Header Field . . . .  13</td><td> </td><td class="right">     4.1.  Calculating Cache Keys with the Vary Header Field . . . .  13</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">     4.2.  Freshness . . . . . . . . . . . . . . . . . . . . . . . .  14</td><td> </td><td class="right">     4.2.  Freshness . . . . . . . . . . . . . . . . . . . . . . . .  14</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">       4.2.1.  Calculating Freshness Lifetime  . . . . . . . . . . .  15</td><td> </td><td class="right">       4.2.1.  Calculating Freshness Lifetime  . . . . . . . . . . .  15</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">       4.2.2.  Calculating Heuristic Freshness . . . . . . . . . . .  16</td><td> </td><td class="right">       4.2.2.  Calculating Heuristic Freshness . . . . . . . . . . .  16</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">       4.2.3.  Calculating Age . . . . . . . . . . . . . . . . . . .  17</td><td> </td><td class="right">       4.2.3.  Calculating Age . . . . . . . . . . . . . . . . . . .  17</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">       4.2.4.  Serving Stale Responses . . . . . . . . . . . . . . .  18</td><td> </td><td class="right">       4.2.4.  Serving Stale Responses . . . . . . . . . . . . . . .  18</td><td class="lineno"></td></tr>
      <tr id="diff0006"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">     4.3.  Validation  . . . . . . . . . . . . . . . . . . . . . . .  1<span class="delete">9</span></td><td> </td><td class="rblock">     4.3.  Validation  . . . . . . . . . . . . . . . . . . . . . . .  1<span class="insert">8</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">       4.3.1.  Sending a Validation Request  . . . . . . . . . . . .  19</td><td> </td><td class="right">       4.3.1.  Sending a Validation Request  . . . . . . . . . . . .  19</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">       4.3.2.  Handling a Received Validation Request  . . . . . . .  20</td><td> </td><td class="right">       4.3.2.  Handling a Received Validation Request  . . . . . . .  20</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">       4.3.3.  Handling a Validation Response  . . . . . . . . . . .  21</td><td> </td><td class="right">       4.3.3.  Handling a Validation Response  . . . . . . . . . . .  21</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">       4.3.4.  Freshening Stored Responses upon Validation . . . . .  21</td><td> </td><td class="right">       4.3.4.  Freshening Stored Responses upon Validation . . . . .  21</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">       4.3.5.  Freshening Responses with HEAD  . . . . . . . . . . .  22</td><td> </td><td class="right">       4.3.5.  Freshening Responses with HEAD  . . . . . . . . . . .  22</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">     4.4.  Invalidating Stored Responses . . . . . . . . . . . . . .  23</td><td> </td><td class="right">     4.4.  Invalidating Stored Responses . . . . . . . . . . . . . .  23</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   5.  Field Definitions . . . . . . . . . . . . . . . . . . . . . .  24</td><td> </td><td class="right">   5.  Field Definitions . . . . . . . . . . . . . . . . . . . . . .  24</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">     5.1.  Age . . . . . . . . . . . . . . . . . . . . . . . . . . .  24</td><td> </td><td class="right">     5.1.  Age . . . . . . . . . . . . . . . . . . . . . . . . . . .  24</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">     5.2.  Cache-Control . . . . . . . . . . . . . . . . . . . . . .  24</td><td> </td><td class="right">     5.2.  Cache-Control . . . . . . . . . . . . . . . . . . . . . .  24</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">       5.2.1.  Request Cache-Control Directives  . . . . . . . . . .  25</td><td> </td><td class="right">       5.2.1.  Request Cache-Control Directives  . . . . . . . . . .  25</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="part-4" class="change" ><td></td><th><small>skipping to change at</small><a href="#part-4"><em> page 4, line 22<span class="hide"> &para;</span></em></a></th><th> </th><th><small>skipping to change at</small><a href="#part-4"><em> page 4, line 22<span class="hide"> &para;</span></em></a></th><td></td></tr>
      <tr><td class="lineno"></td><td class="left">     C.2.  Since draft-ietf-httpbis-cache-00 . . . . . . . . . . . .  41</td><td> </td><td class="right">     C.2.  Since draft-ietf-httpbis-cache-00 . . . . . . . . . . . .  41</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">     C.3.  Since draft-ietf-httpbis-cache-01 . . . . . . . . . . . .  41</td><td> </td><td class="right">     C.3.  Since draft-ietf-httpbis-cache-01 . . . . . . . . . . . .  41</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">     C.4.  Since draft-ietf-httpbis-cache-02 . . . . . . . . . . . .  41</td><td> </td><td class="right">     C.4.  Since draft-ietf-httpbis-cache-02 . . . . . . . . . . . .  41</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">     C.5.  Since draft-ietf-httpbis-cache-03 . . . . . . . . . . . .  41</td><td> </td><td class="right">     C.5.  Since draft-ietf-httpbis-cache-03 . . . . . . . . . . . .  41</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">     C.6.  Since draft-ietf-httpbis-cache-04 . . . . . . . . . . . .  42</td><td> </td><td class="right">     C.6.  Since draft-ietf-httpbis-cache-04 . . . . . . . . . . . .  42</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">     C.7.  Since draft-ietf-httpbis-cache-05 . . . . . . . . . . . .  42</td><td> </td><td class="right">     C.7.  Since draft-ietf-httpbis-cache-05 . . . . . . . . . . . .  42</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">     C.8.  Since draft-ietf-httpbis-cache-06 . . . . . . . . . . . .  42</td><td> </td><td class="right">     C.8.  Since draft-ietf-httpbis-cache-06 . . . . . . . . . . . .  42</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">     C.9.  Since draft-ietf-httpbis-cache-07 . . . . . . . . . . . .  43</td><td> </td><td class="right">     C.9.  Since draft-ietf-httpbis-cache-07 . . . . . . . . . . . .  43</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">     C.10. Since draft-ietf-httpbis-cache-08 . . . . . . . . . . . .  43</td><td> </td><td class="right">     C.10. Since draft-ietf-httpbis-cache-08 . . . . . . . . . . . .  43</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">     C.11. Since draft-ietf-httpbis-cache-09 . . . . . . . . . . . .  43</td><td> </td><td class="right">     C.11. Since draft-ietf-httpbis-cache-09 . . . . . . . . . . . .  43</td><td class="lineno"></td></tr>
      <tr id="diff0007"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">     C.12. Since draft-ietf-httpbis-cache-10 . . . . . . . . . . . .  4<span class="delete">4</span></td><td> </td><td class="rblock">     C.12. Since draft-ietf-httpbis-cache-10 . . . . . . . . . . . .  4<span class="insert">3</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">     C.13. Since draft-ietf-httpbis-cache-11 . . . . . . . . . . . .  44</td><td> </td><td class="right">     C.13. Since draft-ietf-httpbis-cache-11 . . . . . . . . . . . .  44</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">     C.14. Since draft-ietf-httpbis-cache-12 . . . . . . . . . . . .  44</td><td> </td><td class="right">     C.14. Since draft-ietf-httpbis-cache-12 . . . . . . . . . . . .  44</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">     C.15. Since draft-ietf-httpbis-cache-13 . . . . . . . . . . . .  45</td><td> </td><td class="right">     C.15. Since draft-ietf-httpbis-cache-13 . . . . . . . . . . . .  45</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">     C.16. Since draft-ietf-httpbis-cache-14 . . . . . . . . . . . .  45</td><td> </td><td class="right">     C.16. Since draft-ietf-httpbis-cache-14 . . . . . . . . . . . .  45</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">     C.17. Since draft-ietf-httpbis-cache-15 . . . . . . . . . . . .  46</td><td> </td><td class="right">     C.17. Since draft-ietf-httpbis-cache-15 . . . . . . . . . . . .  46</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">     C.18. Since draft-ietf-httpbis-cache-16 . . . . . . . . . . . .  46</td><td> </td><td class="right">     C.18. Since draft-ietf-httpbis-cache-16 . . . . . . . . . . . .  46</td><td class="lineno"></td></tr>
      <tr id="diff0008"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">     C.19. Since draft-ietf-httpbis-cache-17 . . . . . . . . . . . .  46</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Acknowledgements  . . . . . . . . . . . . . . . . . . . . . . . .  46</td><td> </td><td class="right">   Acknowledgements  . . . . . . . . . . . . . . . . . . . . . . . .  46</td><td class="lineno"></td></tr>
      <tr id="diff0009"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   Index . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  4<span class="delete">6</span></td><td> </td><td class="rblock">   Index . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  4<span class="insert">7</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Authors' Addresses  . . . . . . . . . . . . . . . . . . . . . . .  48</td><td> </td><td class="right">   Authors' Addresses  . . . . . . . . . . . . . . . . . . . . . . .  48</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">1.  Introduction</td><td> </td><td class="right">1.  Introduction</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   The Hypertext Transfer Protocol (HTTP) is a stateless application-</td><td> </td><td class="right">   The Hypertext Transfer Protocol (HTTP) is a stateless application-</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   level request/response protocol that uses extensible semantics and</td><td> </td><td class="right">   level request/response protocol that uses extensible semantics and</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   self-descriptive messages for flexible interaction with network-based</td><td> </td><td class="right">   self-descriptive messages for flexible interaction with network-based</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   hypertext information systems.  It is typically used for distributed</td><td> </td><td class="right">   hypertext information systems.  It is typically used for distributed</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   information systems, where the use of response caches can improve</td><td> </td><td class="right">   information systems, where the use of response caches can improve</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   performance.  This document defines aspects of HTTP related to</td><td> </td><td class="right">   performance.  This document defines aspects of HTTP related to</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="part-5" class="change" ><td></td><th><small>skipping to change at</small><a href="#part-5"><em> page 6, line 50<span class="hide"> &para;</span></em></a></th><th> </th><th><small>skipping to change at</small><a href="#part-5"><em> page 6, line 50<span class="hide"> &para;</span></em></a></th><td></td></tr>
      <tr><td class="lineno"></td><td class="left">   concepts of HTTP.</td><td> </td><td class="right">   concepts of HTTP.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Although caching is an entirely OPTIONAL feature of HTTP, it can be</td><td> </td><td class="right">   Although caching is an entirely OPTIONAL feature of HTTP, it can be</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   assumed that reusing a cached response is desirable and that such</td><td> </td><td class="right">   assumed that reusing a cached response is desirable and that such</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   reuse is the default behavior when no requirement or local</td><td> </td><td class="right">   reuse is the default behavior when no requirement or local</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   configuration prevents it.  Therefore, HTTP cache requirements are</td><td> </td><td class="right">   configuration prevents it.  Therefore, HTTP cache requirements are</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   focused on preventing a cache from either storing a non-reusable</td><td> </td><td class="right">   focused on preventing a cache from either storing a non-reusable</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   response or reusing a stored response inappropriately, rather than</td><td> </td><td class="right">   response or reusing a stored response inappropriately, rather than</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   mandating that caches always store and reuse particular responses.</td><td> </td><td class="right">   mandating that caches always store and reuse particular responses.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0010"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   The _cache key_ is the information a cache uses to <span class="delete">select</span> a response</td><td> </td><td class="rblock">   The _cache key_ is the information a cache uses to <span class="insert">choose</span> a response</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   and is composed from, at a minimum, the request method and target URI</td><td> </td><td class="right">   and is composed from, at a minimum, the request method and target URI</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   used to retrieve the stored response; the method determines under</td><td> </td><td class="right">   used to retrieve the stored response; the method determines under</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   which circumstances that response can be used to satisfy a subsequent</td><td> </td><td class="right">   which circumstances that response can be used to satisfy a subsequent</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   request.  However, many HTTP caches in common use today only cache</td><td> </td><td class="right">   request.  However, many HTTP caches in common use today only cache</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   GET responses, and therefore only use the URI as the cache key,</td><td> </td><td class="right">   GET responses, and therefore only use the URI as the cache key,</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   forwarding other methods.</td><td> </td><td class="right">   forwarding other methods.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0011"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   <span class="delete">If</span> a request target is subject to content <span class="delete">negotiation, the cache</span></td><td> </td><td class="rblock">   <span class="insert">A cache might store multiple responses for</span> a request target <span class="insert">that</span> is</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   might store multiple responses for it.</span>  Caches differentiate these</td><td> </td><td class="rblock">   subject to content <span class="insert">negotiation.</span>  Caches differentiate these responses</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   responses by incorporating <span class="delete">values</span> of the original request's <span class="delete">selecting</span></td><td> </td><td class="rblock">   by incorporating <span class="insert">some</span> of the original request's header fields into</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   header fields into the cache key as well, using information in the</td><td> </td><td class="rblock">   the cache key as well, using information in the Vary response header</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   Vary response header field, as per Section 4.1.</td><td> </td><td class="rblock">   field, as per Section 4.1.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Caches might incorporate additional material into the cache key.  For</td><td> </td><td class="right">   Caches might incorporate additional material into the cache key.  For</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   example, user agent caches might include the referring site's</td><td> </td><td class="right">   example, user agent caches might include the referring site's</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   identity, thereby "double keying" the cache to avoid some privacy</td><td> </td><td class="right">   identity, thereby "double keying" the cache to avoid some privacy</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   risks (see Section 7.2).</td><td> </td><td class="right">   risks (see Section 7.2).</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Most commonly, caches store the successful result of a retrieval</td><td> </td><td class="right">   Most commonly, caches store the successful result of a retrieval</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   request: i.e., a 200 (OK) response to a GET request, which contains a</td><td> </td><td class="right">   request: i.e., a 200 (OK) response to a GET request, which contains a</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   representation of the target resource (Section 9.3.1 of [HTTP]).</td><td> </td><td class="right">   representation of the target resource (Section 9.3.1 of [HTTP]).</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   However, it is also possible to store redirects, negative results</td><td> </td><td class="right">   However, it is also possible to store redirects, negative results</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="part-6" class="change" ><td></td><th><small>skipping to change at</small><a href="#part-6"><em> page 11, line 44<span class="hide"> &para;</span></em></a></th><th> </th><th><small>skipping to change at</small><a href="#part-6"><em> page 11, line 44<span class="hide"> &para;</span></em></a></th><td></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   When presented with a request, a cache MUST NOT reuse a stored</td><td> </td><td class="right">   When presented with a request, a cache MUST NOT reuse a stored</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   response unless:</td><td> </td><td class="right">   response unless:</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   *  The presented target URI (Section 7.1 of [HTTP]) and that of the</td><td> </td><td class="right">   *  The presented target URI (Section 7.1 of [HTTP]) and that of the</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      stored response match, and</td><td> </td><td class="right">      stored response match, and</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   *  the request method associated with the stored response allows it</td><td> </td><td class="right">   *  the request method associated with the stored response allows it</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      to be used for the presented request, and</td><td> </td><td class="right">      to be used for the presented request, and</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0012"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   *  <span class="delete">selecting</span> header fields nominated by the stored response (if any)</td><td> </td><td class="rblock">   *  <span class="insert">request</span> header fields nominated by the stored response (if any)</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      match those presented (see Section 4.1), and</td><td> </td><td class="right">      match those presented (see Section 4.1), and</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   *  the stored response does not contain the no-cache cache directive</td><td> </td><td class="right">   *  the stored response does not contain the no-cache cache directive</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      (Section 5.2.2.4), unless it is successfully validated</td><td> </td><td class="right">      (Section 5.2.2.4), unless it is successfully validated</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      (Section 4.3), and</td><td> </td><td class="right">      (Section 4.3), and</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   *  the stored response is either:</td><td> </td><td class="right">   *  the stored response is either:</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      -  fresh (see Section 4.2), or</td><td> </td><td class="right">      -  fresh (see Section 4.2), or</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="part-7" class="change" ><td></td><th><small>skipping to change at</small><a href="#part-7"><em> page 12, line 42<span class="hide"> &para;</span></em></a></th><th> </th><th><small>skipping to change at</small><a href="#part-7"><em> page 12, line 42<span class="hide"> &para;</span></em></a></th><td></td></tr>
      <tr><td class="lineno"></td><td class="left">   network.  However, note that if the response returned is not able to</td><td> </td><td class="right">   network.  However, note that if the response returned is not able to</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   be used for some or all of the collapsed requests, additional latency</td><td> </td><td class="right">   be used for some or all of the collapsed requests, additional latency</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   might be introduced, because they will need to be forwarded to be</td><td> </td><td class="right">   might be introduced, because they will need to be forwarded to be</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   satisfied.</td><td> </td><td class="right">   satisfied.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   When more than one suitable response is stored, a cache MUST use the</td><td> </td><td class="right">   When more than one suitable response is stored, a cache MUST use the</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   most recent one (as determined by the Date header field).  It can</td><td> </td><td class="right">   most recent one (as determined by the Date header field).  It can</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   also forward the request with "Cache-Control: max-age=0" or "Cache-</td><td> </td><td class="right">   also forward the request with "Cache-Control: max-age=0" or "Cache-</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Control: no-cache" to disambiguate which response to use.</td><td> </td><td class="right">   Control: no-cache" to disambiguate which response to use.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0013"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   A cache <span class="delete">that does not have</span> a clock <span class="delete">available</span> MUST <span class="delete">NOT use</span> stored</td><td> </td><td class="rblock">   A cache <span class="insert">without</span> a clock <span class="insert">(Section 5.6.7 of [HTTP])</span> MUST <span class="insert">revalidate</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   responses <span class="delete">without revalidating them</span> upon every use.</td><td> </td><td class="rblock">   stored responses upon every use.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">4.1.  Calculating Cache Keys with the Vary Header Field</td><td> </td><td class="right">4.1.  Calculating Cache Keys with the Vary Header Field</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   When a cache receives a request that can be satisfied by a stored</td><td> </td><td class="right">   When a cache receives a request that can be satisfied by a stored</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   response and that stored response contains a Vary header field</td><td> </td><td class="right">   response and that stored response contains a Vary header field</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   (Section 12.5.5 of [HTTP]), the cache MUST NOT use that stored</td><td> </td><td class="right">   (Section 12.5.5 of [HTTP]), the cache MUST NOT use that stored</td><td class="lineno"></td></tr>
      <tr id="diff0014"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   response without revalidation unless all the <span class="delete">selecting</span> header fields</td><td> </td><td class="rblock">   response without revalidation unless all the <span class="insert">presented request</span> header</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   <span class="delete">(nominated</span> by that Vary field <span class="delete">value) in the present request</span> match</td><td> </td><td class="rblock">   fields <span class="insert">nominated</span> by that Vary field <span class="insert">value</span> match those fields in the</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   those fields in the original request (i.e., the request that caused</td><td> </td><td class="rblock">   original request (i.e., the request that caused the cached response</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   the cached response to be stored).</td><td> </td><td class="rblock">   to be stored).</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0015"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   The <span class="delete">selecting</span> header fields from two requests are defined to match if</td><td> </td><td class="rblock">   The header fields from two requests are defined to match if and only</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   and only if those in the first request can be transformed to those in</td><td> </td><td class="rblock">   if those in the first request can be transformed to those in the</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   the second request by applying any of:</td><td> </td><td class="rblock">   second request by applying any of:</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   *  adding or removing whitespace, where allowed in the header field's</td><td> </td><td class="right">   *  adding or removing whitespace, where allowed in the header field's</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      syntax</td><td> </td><td class="right">      syntax</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   *  combining multiple header field lines with the same field name</td><td> </td><td class="right">   *  combining multiple header field lines with the same field name</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      (see Section 5.2 of [HTTP])</td><td> </td><td class="right">      (see Section 5.2 of [HTTP])</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   *  normalizing both header field values in a way that is known to</td><td> </td><td class="right">   *  normalizing both header field values in a way that is known to</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      have identical semantics, according to the header field's</td><td> </td><td class="right">      have identical semantics, according to the header field's</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      specification (e.g., reordering field values when order is not</td><td> </td><td class="right">      specification (e.g., reordering field values when order is not</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      significant; case-normalization, where values are defined to be</td><td> </td><td class="right">      significant; case-normalization, where values are defined to be</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      case-insensitive)</td><td> </td><td class="right">      case-insensitive)</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   If (after any normalization that might take place) a header field is</td><td> </td><td class="right">   If (after any normalization that might take place) a header field is</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   absent from a request, it can only match another request if it is</td><td> </td><td class="right">   absent from a request, it can only match another request if it is</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   also absent there.</td><td> </td><td class="right">   also absent there.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   A stored response with a Vary header field value containing a member</td><td> </td><td class="right">   A stored response with a Vary header field value containing a member</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   "*" always fails to match.</td><td> </td><td class="right">   "*" always fails to match.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0016"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   <span class="delete">The stored response with matching selecting header fields is known as</span></td><td> </td><td class="rblock">   If multiple <span class="insert">stored</span> responses <span class="insert">match,</span> the cache will need to choose one</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   the _selected response_.</span></td><td> </td><td class="rblock">   to use.  When a <span class="insert">nominated request</span> header field has a known mechanism</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">                                                                                </td><td> </td><td class="rblock">   for <span class="insert">ranking preference</span> (e.g., qvalues on Accept and similar request</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   If multiple <span class="delete">selected responses are available (potentially including</span></td><td> </td><td class="rblock">   header fields), that mechanism MAY be used to <span class="insert">choose</span> a preferred</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   responses <span class="delete">without a Vary header field),</span> the cache will need to choose</td><td> </td><td class="rblock">   response.  If such a mechanism is not available, or leads to equally</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   one to use.  When a <span class="delete">selecting</span> header field has a known mechanism for</td><td> </td><td class="rblock">   preferred responses, the most recent response (as determined by the</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   <span class="delete">doing so</span> (e.g., qvalues on Accept and similar request header fields),</td><td> </td><td class="rblock">   Date header field) is <span class="insert">chosen,</span> as per Section 4.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   that mechanism MAY be used to <span class="delete">select</span> a preferred response.  If such a</td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   mechanism is not available, or leads to equally preferred responses,</td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   the most recent response (as determined by the Date header field) is</td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   <span class="delete">used,</span> as per Section 4.</td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Some resources mistakenly omit the Vary header field from their</td><td> </td><td class="right">   Some resources mistakenly omit the Vary header field from their</td><td class="lineno"></td></tr>
      <tr id="diff0017"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   default response (i.e., the one sent when <span class="delete">no more preferable response</span></td><td> </td><td class="rblock">   default response (i.e., the one sent when <span class="insert">the request does not</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   is available),</span> with the effect of <span class="delete">selecting</span> it for requests to that</td><td> </td><td class="rblock"><span class="insert">   express any preferences),</span> with the effect of <span class="insert">choosing</span> it for</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   resource even when more preferable responses are available.  When a</td><td> </td><td class="rblock">   <span class="insert">subsequent</span> requests to that resource even when more preferable</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   cache has multiple responses for a target URI and one or more omits</td><td> </td><td class="rblock">   responses are available.  When a cache has multiple <span class="insert">stored</span> responses</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   the Vary header field, <span class="delete">it</span> SHOULD <span class="delete">use</span> the most recent (see</td><td> </td><td class="rblock">   for a target URI and one or more omits the Vary header field, <span class="insert">the</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   Section 4.2.3) valid Vary field <span class="delete">value available to select an</span></td><td> </td><td class="rblock"><span class="insert">   cache</span> SHOULD <span class="insert">choose</span> the most recent (see Section 4.2.3) <span class="insert">stored</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   appropriate response for the request.</span></td><td> </td><td class="rblock"><span class="insert">   response with a</span> valid Vary field <span class="insert">value.</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0018"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   If no <span class="delete">selected</span> response <span class="delete">is available,</span> the cache cannot satisfy the</td><td> </td><td class="rblock">   If no <span class="insert">stored</span> response <span class="insert">matches,</span> the cache cannot satisfy the presented</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   presented request.  Typically, <span class="delete">it</span> is forwarded to the origin <span class="delete">server</span></td><td> </td><td class="rblock">   request.  Typically, <span class="insert">the request</span> is forwarded to the origin <span class="insert">server,</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   in a (possibly conditional; see Section 4.3) request.</span></td><td> </td><td class="rblock"><span class="insert">   potentially with preconditions added to describe what responses the</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   cache has already stored (Section 4.3).</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">4.2.  Freshness</td><td> </td><td class="right">4.2.  Freshness</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   A _fresh_ response is one whose age has not yet exceeded its</td><td> </td><td class="right">   A _fresh_ response is one whose age has not yet exceeded its</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   freshness lifetime.  Conversely, a _stale_ response is one where it</td><td> </td><td class="right">   freshness lifetime.  Conversely, a _stale_ response is one where it</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   has.</td><td> </td><td class="right">   has.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   A response's _freshness lifetime_ is the length of time between its</td><td> </td><td class="right">   A response's _freshness lifetime_ is the length of time between its</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   generation by the origin server and its expiration time.  An</td><td> </td><td class="right">   generation by the origin server and its expiration time.  An</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   _explicit expiration time_ is the time at which the origin server</td><td> </td><td class="right">   _explicit expiration time_ is the time at which the origin server</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="part-8" class="change" ><td></td><th><small>skipping to change at</small><a href="#part-8"><em> page 15, line 52<span class="hide"> &para;</span></em></a></th><th> </th><th><small>skipping to change at</small><a href="#part-8"><em> page 16, line 8<span class="hide"> &para;</span></em></a></th><td></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   *  If the cache is shared and the s-maxage response directive</td><td> </td><td class="right">   *  If the cache is shared and the s-maxage response directive</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      (Section 5.2.2.10) is present, use its value, or</td><td> </td><td class="right">      (Section 5.2.2.10) is present, use its value, or</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   *  If the max-age response directive (Section 5.2.2.1) is present,</td><td> </td><td class="right">   *  If the max-age response directive (Section 5.2.2.1) is present,</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      use its value, or</td><td> </td><td class="right">      use its value, or</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   *  If the Expires response header field (Section 5.3) is present, use</td><td> </td><td class="right">   *  If the Expires response header field (Section 5.3) is present, use</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      its value minus the value of the Date response header field (using</td><td> </td><td class="right">      its value minus the value of the Date response header field (using</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      the time the message was received if it is not present, as per</td><td> </td><td class="right">      the time the message was received if it is not present, as per</td><td class="lineno"></td></tr>
      <tr id="diff0019"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">      Section <span class="delete">10.2.2</span> of [HTTP]), or</td><td> </td><td class="rblock">      Section <span class="insert">6.6.1</span> of [HTTP]), or</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   *  Otherwise, no explicit expiration time is present in the response.</td><td> </td><td class="right">   *  Otherwise, no explicit expiration time is present in the response.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      A heuristic freshness lifetime might be applicable; see</td><td> </td><td class="right">      A heuristic freshness lifetime might be applicable; see</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      Section 4.2.2.</td><td> </td><td class="right">      Section 4.2.2.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Note that this calculation is intended to reduce clock skew by using</td><td> </td><td class="right">   Note that this calculation is intended to reduce clock skew by using</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   the clock information provided by the origin server whenever</td><td> </td><td class="right">   the clock information provided by the origin server whenever</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   possible.</td><td> </td><td class="right">   possible.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   When there is more than one value present for a given directive</td><td> </td><td class="right">   When there is more than one value present for a given directive</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="part-9" class="change" ><td></td><th><small>skipping to change at</small><a href="#part-9"><em> page 17, line 30<span class="hide"> &para;</span></em></a></th><th> </th><th><small>skipping to change at</small><a href="#part-9"><em> page 17, line 30<span class="hide"> &para;</span></em></a></th><td></td></tr>
      <tr><td class="lineno"></td><td class="left">   been in transit along network paths.</td><td> </td><td class="right">   been in transit along network paths.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Age calculation uses the following data:</td><td> </td><td class="right">   Age calculation uses the following data:</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   _age_value_  The term "age_value" denotes the value of the Age header</td><td> </td><td class="right">   _age_value_  The term "age_value" denotes the value of the Age header</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      field (Section 5.1), in a form appropriate for arithmetic</td><td> </td><td class="right">      field (Section 5.1), in a form appropriate for arithmetic</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      operation; or 0, if not available.</td><td> </td><td class="right">      operation; or 0, if not available.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   _date_value_  The term "date_value" denotes the value of the Date</td><td> </td><td class="right">   _date_value_  The term "date_value" denotes the value of the Date</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      header field, in a form appropriate for arithmetic operations.</td><td> </td><td class="right">      header field, in a form appropriate for arithmetic operations.</td><td class="lineno"></td></tr>
      <tr id="diff0020"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">      See Section <span class="delete">10.2.2</span> of [HTTP] for the definition of the Date header</td><td> </td><td class="rblock">      See Section <span class="insert">6.6.1</span> of [HTTP] for the definition of the Date header</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      field, and for requirements regarding responses without it.</td><td> </td><td class="right">      field, and for requirements regarding responses without it.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0021"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   _now_  The term "now" means <span class="delete">"the</span> current value of <span class="delete">the</span> clock <span class="delete">at the</span></td><td> </td><td class="rblock">   _now_  The term "now" means <span class="insert">the</span> current value of <span class="insert">this</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">      host performing the calculation".  A host ought to use NTP</span></td><td> </td><td class="rblock"><span class="insert">      implementation's</span> clock <span class="insert">(Section 5.6.7 of [HTTP]).</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">      ([RFC5905]) or some similar protocol to synchronize its clocks to</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">      Coordinated Universal Time.</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0022"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   _request_time_  The <span class="delete">current</span> value of the clock at the <span class="delete">host at the</span></td><td> </td><td class="rblock">   _request_time_  The value of the clock at the time <span class="insert">of</span> the request</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">      time the request <span class="delete">resulting</span> in the stored <span class="delete">response was made.</span></td><td> </td><td class="rblock">      <span class="insert">that resulted</span> in the stored <span class="insert">response.</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0023"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   _response_time_  The <span class="delete">current</span> value of the clock at the <span class="delete">host at the</span></td><td> </td><td class="rblock">   _response_time_  The value of the clock at the time the response was</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">      time the response was received.</td><td> </td><td class="rblock">      received.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   A response's age can be calculated in two entirely independent ways:</td><td> </td><td class="right">   A response's age can be calculated in two entirely independent ways:</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0024"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   1.  the "apparent_age": response_time minus date_value, if the <span class="delete">local</span></td><td> </td><td class="rblock">   1.  the "apparent_age": response_time minus date_value, if the</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">       clock is reasonably well synchronized to the origin server's</td><td> </td><td class="rblock">       <span class="insert">implementation's</span> clock is reasonably well synchronized to the</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">       clock.  If the result is negative, the result is replaced by</td><td> </td><td class="rblock">       origin server's clock.  If the result is negative, the result is</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">       zero.</td><td> </td><td class="rblock">       replaced by zero.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   2.  the "corrected_age_value", if all of the caches along the</td><td> </td><td class="right">   2.  the "corrected_age_value", if all of the caches along the</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">       response path implement HTTP/1.1 or greater.  A cache MUST</td><td> </td><td class="right">       response path implement HTTP/1.1 or greater.  A cache MUST</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">       interpret this value relative to the time the request was</td><td> </td><td class="right">       interpret this value relative to the time the request was</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">       initiated, not the time that the response was received.</td><td> </td><td class="right">       initiated, not the time that the response was received.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">     apparent_age = max(0, response_time - date_value);</td><td> </td><td class="right">     apparent_age = max(0, response_time - date_value);</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">     response_delay = response_time - request_time;</td><td> </td><td class="right">     response_delay = response_time - request_time;</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">     corrected_age_value = age_value + response_delay;</td><td> </td><td class="right">     corrected_age_value = age_value + response_delay;</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="part-10" class="change" ><td></td><th><small>skipping to change at</small><a href="#part-10"><em> page 19, line 9<span class="hide"> &para;</span></em></a></th><th> </th><th><small>skipping to change at</small><a href="#part-10"><em> page 18, line 46<span class="hide"> &para;</span></em></a></th><td></td></tr>
      <tr><td class="lineno"></td><td class="left">   A cache MUST NOT generate a stale response unless it is disconnected</td><td> </td><td class="right">   A cache MUST NOT generate a stale response unless it is disconnected</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   or doing so is explicitly permitted by the client or origin server</td><td> </td><td class="right">   or doing so is explicitly permitted by the client or origin server</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   (e.g., by the max-stale request directive in Section 5.2.1, by</td><td> </td><td class="right">   (e.g., by the max-stale request directive in Section 5.2.1, by</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   extension directives such as those defined in [RFC5861], or by</td><td> </td><td class="right">   extension directives such as those defined in [RFC5861], or by</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   configuration in accordance with an out-of-band contract).</td><td> </td><td class="right">   configuration in accordance with an out-of-band contract).</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">4.3.  Validation</td><td> </td><td class="right">4.3.  Validation</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   When a cache has one or more stored responses for a requested URI,</td><td> </td><td class="right">   When a cache has one or more stored responses for a requested URI,</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   but cannot serve any of them (e.g., because they are not fresh, or</td><td> </td><td class="right">   but cannot serve any of them (e.g., because they are not fresh, or</td><td class="lineno"></td></tr>
      <tr id="diff0025"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   one cannot be <span class="delete">selected</span>; see Section 4.1), it can use the conditional</td><td> </td><td class="rblock">   one cannot be <span class="insert">chosen</span>; see Section 4.1), it can use the conditional</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   request mechanism (Section 13.1 of [HTTP]) in the forwarded request</td><td> </td><td class="right">   request mechanism (Section 13.1 of [HTTP]) in the forwarded request</td><td class="lineno"></td></tr>
      <tr id="diff0026"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   to give the next inbound server an opportunity to <span class="delete">select</span> a valid</td><td> </td><td class="rblock">   to give the next inbound server an opportunity to <span class="insert">choose</span> a valid</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   stored response to use, updating the stored metadata in the process,</td><td> </td><td class="right">   stored response to use, updating the stored metadata in the process,</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   or to replace the stored response(s) with a new response.  This</td><td> </td><td class="right">   or to replace the stored response(s) with a new response.  This</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   process is known as _validating_ or _revalidating_ the stored</td><td> </td><td class="right">   process is known as _validating_ or _revalidating_ the stored</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   response.</td><td> </td><td class="right">   response.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">4.3.1.  Sending a Validation Request</td><td> </td><td class="right">4.3.1.  Sending a Validation Request</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   When generating a conditional request for validation, a cache starts</td><td> </td><td class="right">   When generating a conditional request for validation, a cache starts</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   with either a request it is attempting to satisfy, or - if it is</td><td> </td><td class="right">   with either a request it is attempting to satisfy, or - if it is</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   initiating the request independently - it synthesises a request using</td><td> </td><td class="right">   initiating the request independently - it synthesises a request using</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   a stored response by copying the method, target URI, and request</td><td> </td><td class="right">   a stored response by copying the method, target URI, and request</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   header fields identified by the Vary header field (Section 4.1).</td><td> </td><td class="right">   header fields identified by the Vary header field (Section 4.1).</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   It then updates that request with one or more precondition header</td><td> </td><td class="right">   It then updates that request with one or more precondition header</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   fields.  These contain validator metadata sourced from stored</td><td> </td><td class="right">   fields.  These contain validator metadata sourced from stored</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   response(s) that have the same URI.  Typically, this will include</td><td> </td><td class="right">   response(s) that have the same URI.  Typically, this will include</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   only those stored responses(s) that have the same cache key, although</td><td> </td><td class="right">   only those stored responses(s) that have the same cache key, although</td><td class="lineno"></td></tr>
      <tr id="diff0027"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   a cache is allowed to validate a response that it cannot <span class="delete">select</span> with</td><td> </td><td class="rblock">   a cache is allowed to validate a response that it cannot <span class="insert">choose</span> with</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   the request header fields it is sending (see Section 4.1).</td><td> </td><td class="right">   the request header fields it is sending (see Section 4.1).</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   The precondition header fields are then compared by recipients to</td><td> </td><td class="right">   The precondition header fields are then compared by recipients to</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   determine whether any stored response is equivalent to a current</td><td> </td><td class="right">   determine whether any stored response is equivalent to a current</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   representation of the resource.</td><td> </td><td class="right">   representation of the resource.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   One such validator is the timestamp given in a Last-Modified header</td><td> </td><td class="right">   One such validator is the timestamp given in a Last-Modified header</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   field (Section 8.8.2 of [HTTP]), which can be used in an If-Modified-</td><td> </td><td class="right">   field (Section 8.8.2 of [HTTP]), which can be used in an If-Modified-</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Since header field for response validation, or in an If-Unmodified-</td><td> </td><td class="right">   Since header field for response validation, or in an If-Unmodified-</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Since or If-Range header field for representation selection (i.e.,</td><td> </td><td class="right">   Since or If-Range header field for representation selection (i.e.,</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="part-11" class="change" ><td></td><th><small>skipping to change at</small><a href="#part-11"><em> page 20, line 5<span class="hide"> &para;</span></em></a></th><th> </th><th><small>skipping to change at</small><a href="#part-11"><em> page 19, line 39<span class="hide"> &para;</span></em></a></th><td></td></tr>
      <tr><td class="lineno"></td><td class="left">   representation with that timestamp).</td><td> </td><td class="right">   representation with that timestamp).</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Another validator is the entity-tag given in an ETag field</td><td> </td><td class="right">   Another validator is the entity-tag given in an ETag field</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   (Section 8.8.3 of [HTTP]).  One or more entity-tags, indicating one</td><td> </td><td class="right">   (Section 8.8.3 of [HTTP]).  One or more entity-tags, indicating one</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   or more stored responses, can be used in an If-None-Match header</td><td> </td><td class="right">   or more stored responses, can be used in an If-None-Match header</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   field for response validation, or in an If-Match or If-Range header</td><td> </td><td class="right">   field for response validation, or in an If-Match or If-Range header</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   field for representation selection (i.e., the client is referring</td><td> </td><td class="right">   field for representation selection (i.e., the client is referring</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   specifically to one or more previously obtained representations with</td><td> </td><td class="right">   specifically to one or more previously obtained representations with</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   the listed entity-tags).</td><td> </td><td class="right">   the listed entity-tags).</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0028"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock">   <span class="insert">When generating a conditional request for validation, a cache:</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   *  MUST send the relevant entity-tags (using If-Match, If-None-Match,</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">      or If-Range) if the entity-tags were provided in the stored</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">      response(s) being validated.</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   *  SHOULD send the Last-Modified value (using If-Modified-Since) if</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">      the request is not for a subrange, a single stored response is</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">      being validated, and that response contains a Last-Modified value.</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   *  MAY send the Last-Modified value (using If-Unmodified-Since or If-</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">      Range) if the request is for a subrange, a single stored response</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">      is being validated, and that response contains only a Last-</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">      Modified value (not an entity-tag).</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   In most cases, both validators are generated in cache validation</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   requests, even when entity-tags are clearly superior, to allow old</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   intermediaries that do not understand entity-tag preconditions to</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   respond appropriately.</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock">                                                                                </td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">4.3.2.  Handling a Received Validation Request</td><td> </td><td class="right">4.3.2.  Handling a Received Validation Request</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Each client in the request chain may have its own cache, so it is</td><td> </td><td class="right">   Each client in the request chain may have its own cache, so it is</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   common for a cache at an intermediary to receive conditional requests</td><td> </td><td class="right">   common for a cache at an intermediary to receive conditional requests</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   from other (outbound) caches.  Likewise, some user agents make use of</td><td> </td><td class="right">   from other (outbound) caches.  Likewise, some user agents make use of</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   conditional requests to limit data transfers to recently modified</td><td> </td><td class="right">   conditional requests to limit data transfers to recently modified</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   representations or to complete the transfer of a partially retrieved</td><td> </td><td class="right">   representations or to complete the transfer of a partially retrieved</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   representation.</td><td> </td><td class="right">   representation.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   If a cache receives a request that can be satisfied by reusing a</td><td> </td><td class="right">   If a cache receives a request that can be satisfied by reusing a</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   stored 200 (OK) or 206 (Partial Content) response, as per Section 4,</td><td> </td><td class="right">   stored 200 (OK) or 206 (Partial Content) response, as per Section 4,</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   the cache SHOULD evaluate any applicable conditional header field</td><td> </td><td class="right">   the cache SHOULD evaluate any applicable conditional header field</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   preconditions received in that request with respect to the</td><td> </td><td class="right">   preconditions received in that request with respect to the</td><td class="lineno"></td></tr>
      <tr id="diff0029"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   corresponding validators contained within the s<span class="delete">elect</span>ed response.</td><td> </td><td class="rblock">   corresponding validators contained within the s<span class="insert">tor</span>ed response.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   A cache MUST NOT evaluate conditional header fields that only apply</td><td> </td><td class="right">   A cache MUST NOT evaluate conditional header fields that only apply</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   to an origin server, occur in a request with semantics that cannot be</td><td> </td><td class="right">   to an origin server, occur in a request with semantics that cannot be</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   satisfied with a cached response, or occur in a request with a target</td><td> </td><td class="right">   satisfied with a cached response, or occur in a request with a target</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   resource for which it has no stored responses; such preconditions are</td><td> </td><td class="right">   resource for which it has no stored responses; such preconditions are</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   likely intended for some other (inbound) server.</td><td> </td><td class="right">   likely intended for some other (inbound) server.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   The proper evaluation of conditional requests by a cache depends on</td><td> </td><td class="right">   The proper evaluation of conditional requests by a cache depends on</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   the received precondition header fields and their precedence.  In</td><td> </td><td class="right">   the received precondition header fields and their precedence.  In</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   summary, the If-Match and If-Unmodified-Since conditional header</td><td> </td><td class="right">   summary, the If-Match and If-Unmodified-Since conditional header</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   fields are not applicable to a cache, and If-None-Match takes</td><td> </td><td class="right">   fields are not applicable to a cache, and If-None-Match takes</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   precedence over If-Modified-Since.  See Section 13.2.2 of [HTTP] for</td><td> </td><td class="right">   precedence over If-Modified-Since.  See Section 13.2.2 of [HTTP] for</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   a complete specification of precondition precedence.</td><td> </td><td class="right">   a complete specification of precondition precedence.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   A request containing an If-None-Match header field (Section 13.1.2 of</td><td> </td><td class="right">   A request containing an If-None-Match header field (Section 13.1.2 of</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   [HTTP]) indicates that the client wants to validate one or more of</td><td> </td><td class="right">   [HTTP]) indicates that the client wants to validate one or more of</td><td class="lineno"></td></tr>
      <tr id="diff0030"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   its own stored responses in comparison to the stored response</td><td> </td><td class="rblock">   its own stored responses in comparison to the stored response <span class="insert">chosen</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   <span class="delete">selected</span> by the cache (as per Section 4).</td><td> </td><td class="rblock">   by the cache (as per Section 4).</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   If an If-None-Match header field is not present, a request containing</td><td> </td><td class="right">   If an If-None-Match header field is not present, a request containing</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   an If-Modified-Since header field (Section 13.1.3 of [HTTP])</td><td> </td><td class="right">   an If-Modified-Since header field (Section 13.1.3 of [HTTP])</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   indicates that the client wants to validate one or more of its own</td><td> </td><td class="right">   indicates that the client wants to validate one or more of its own</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   stored responses by modification date.</td><td> </td><td class="right">   stored responses by modification date.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   If a request contains an If-Modified-Since header field and the Last-</td><td> </td><td class="right">   If a request contains an If-Modified-Since header field and the Last-</td><td class="lineno"></td></tr>
      <tr id="diff0031"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   Modified header field is not present in a <span class="delete">selected</span> stored response, a</td><td> </td><td class="rblock">   Modified header field is not present in a stored response, a cache</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   cache SHOULD use the stored response's Date field value (or, if no</td><td> </td><td class="rblock">   SHOULD use the stored response's Date field value (or, if no Date</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   Date field is present, the time that the stored response was</td><td> </td><td class="rblock">   field is present, the time that the stored response was received) to</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   received) to evaluate the conditional.</td><td> </td><td class="rblock">   evaluate the conditional.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   A cache that implements partial responses to range requests, as</td><td> </td><td class="right">   A cache that implements partial responses to range requests, as</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   defined in Section 14.2 of [HTTP], also needs to evaluate a received</td><td> </td><td class="right">   defined in Section 14.2 of [HTTP], also needs to evaluate a received</td><td class="lineno"></td></tr>
      <tr id="diff0032"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   If-Range header field (Section 13.1.5 of [HTTP]) <span class="delete">regarding its</span></td><td> </td><td class="rblock">   If-Range header field (Section 13.1.5 of [HTTP]) <span class="insert">with respect to the</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   selected stored</span> response.</td><td> </td><td class="rblock"><span class="insert">   cache's chosen</span> response.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   When a cache decides to forward a request to revalidate its own</td><td> </td><td class="right">   When a cache decides to forward a request to revalidate its own</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   stored responses for a request that contains an If-None-Match list of</td><td> </td><td class="right">   stored responses for a request that contains an If-None-Match list of</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   entity-tags, the cache MAY combine the received list with a list of</td><td> </td><td class="right">   entity-tags, the cache MAY combine the received list with a list of</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   entity-tags from its own stored set of responses (fresh or stale) and</td><td> </td><td class="right">   entity-tags from its own stored set of responses (fresh or stale) and</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   send the union of the two lists as a replacement If-None-Match header</td><td> </td><td class="right">   send the union of the two lists as a replacement If-None-Match header</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   field value in the forwarded request.  If a stored response contains</td><td> </td><td class="right">   field value in the forwarded request.  If a stored response contains</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   only partial content, the cache MUST NOT include its entity-tag in</td><td> </td><td class="right">   only partial content, the cache MUST NOT include its entity-tag in</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   the union unless the request is for a range that would be fully</td><td> </td><td class="right">   the union unless the request is for a range that would be fully</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   satisfied by that partial stored response.  If the response to the</td><td> </td><td class="right">   satisfied by that partial stored response.  If the response to the</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="part-12" class="change" ><td></td><th><small>skipping to change at</small><a href="#part-12"><em> page 21, line 48<span class="hide"> &para;</span></em></a></th><th> </th><th><small>skipping to change at</small><a href="#part-12"><em> page 22, line 6<span class="hide"> &para;</span></em></a></th><td></td></tr>
      <tr><td class="lineno"></td><td class="left">      stored response, subject to its constraints on doing so (see</td><td> </td><td class="right">      stored response, subject to its constraints on doing so (see</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      Section 4.2.4), or retry the validation request.</td><td> </td><td class="right">      Section 4.2.4), or retry the validation request.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">4.3.4.  Freshening Stored Responses upon Validation</td><td> </td><td class="right">4.3.4.  Freshening Stored Responses upon Validation</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   When a cache receives a 304 (Not Modified) response, it needs to</td><td> </td><td class="right">   When a cache receives a 304 (Not Modified) response, it needs to</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   identify stored responses that are suitable for updating with the new</td><td> </td><td class="right">   identify stored responses that are suitable for updating with the new</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   information provided, and then do so.</td><td> </td><td class="right">   information provided, and then do so.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   The initial set of stored responses to update are those that could</td><td> </td><td class="right">   The initial set of stored responses to update are those that could</td><td class="lineno"></td></tr>
      <tr id="diff0033"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   have been <span class="delete">selected</span> for that request - i.e., those that meet the</td><td> </td><td class="rblock">   have been <span class="insert">chosen</span> for that request - i.e., those that meet the</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   requirements in Section 4, except the last requirement to be fresh,</td><td> </td><td class="right">   requirements in Section 4, except the last requirement to be fresh,</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   able to be served stale or just validated.</td><td> </td><td class="right">   able to be served stale or just validated.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Then, that initial set of stored response(s) is further filtered by</td><td> </td><td class="right">   Then, that initial set of stored response(s) is further filtered by</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   the first match of:</td><td> </td><td class="right">   the first match of:</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   *  If the new response contains one or more _strong validators_ (see</td><td> </td><td class="right">   *  If the new response contains one or more _strong validators_ (see</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      Section 8.8.1 of [HTTP]), then each of those strong validators</td><td> </td><td class="right">      Section 8.8.1 of [HTTP]), then each of those strong validators</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      identify a selected representation for update.  All the stored</td><td> </td><td class="right">      identify a selected representation for update.  All the stored</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      responses in the initial set with one of those same strong</td><td> </td><td class="right">      responses in the initial set with one of those same strong</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="part-13" class="change" ><td></td><th><small>skipping to change at</small><a href="#part-13"><em> page 22, line 44<span class="hide"> &para;</span></em></a></th><th> </th><th><small>skipping to change at</small><a href="#part-13"><em> page 22, line 49<span class="hide"> &para;</span></em></a></th><td></td></tr>
      <tr><td class="lineno"></td><td class="left">   A response to the HEAD method is identical to what an equivalent</td><td> </td><td class="right">   A response to the HEAD method is identical to what an equivalent</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   request made with a GET would have been, without sending the content.</td><td> </td><td class="right">   request made with a GET would have been, without sending the content.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   This property of HEAD responses can be used to invalidate or update a</td><td> </td><td class="right">   This property of HEAD responses can be used to invalidate or update a</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   cached GET response if the more efficient conditional GET request</td><td> </td><td class="right">   cached GET response if the more efficient conditional GET request</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   mechanism is not available (due to no validators being present in the</td><td> </td><td class="right">   mechanism is not available (due to no validators being present in the</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   stored response) or if transmission of the content is not desired</td><td> </td><td class="right">   stored response) or if transmission of the content is not desired</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   even if it has changed.</td><td> </td><td class="right">   even if it has changed.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   When a cache makes an inbound HEAD request for a target URI and</td><td> </td><td class="right">   When a cache makes an inbound HEAD request for a target URI and</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   receives a 200 (OK) response, the cache SHOULD update or invalidate</td><td> </td><td class="right">   receives a 200 (OK) response, the cache SHOULD update or invalidate</td><td class="lineno"></td></tr>
      <tr id="diff0034"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   each of its stored GET responses that could have been <span class="delete">selected</span> for</td><td> </td><td class="rblock">   each of its stored GET responses that could have been <span class="insert">chosen</span> for that</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   that request (see Section 4.1).</td><td> </td><td class="rblock">   request (see Section 4.1).</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0035"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   For each of the stored responses that could have been <span class="delete">selected,</span> if</td><td> </td><td class="rblock">   For each of the stored responses that could have been <span class="insert">chosen,</span> if the</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   the stored response and HEAD response have matching values for any</td><td> </td><td class="rblock">   stored response and HEAD response have matching values for any</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   received validator fields (ETag and Last-Modified) and, if the HEAD</td><td> </td><td class="right">   received validator fields (ETag and Last-Modified) and, if the HEAD</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   response has a Content-Length header field, the value of Content-</td><td> </td><td class="right">   response has a Content-Length header field, the value of Content-</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Length matches that of the stored response, the cache SHOULD update</td><td> </td><td class="right">   Length matches that of the stored response, the cache SHOULD update</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   the stored response as described below; otherwise, the cache SHOULD</td><td> </td><td class="right">   the stored response as described below; otherwise, the cache SHOULD</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   consider the stored response to be stale.</td><td> </td><td class="right">   consider the stored response to be stale.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   If a cache updates a stored response with the metadata provided in a</td><td> </td><td class="right">   If a cache updates a stored response with the metadata provided in a</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   HEAD response, the cache MUST use the header fields provided in the</td><td> </td><td class="right">   HEAD response, the cache MUST use the header fields provided in the</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   HEAD response to update the stored response (see Section 3.2).</td><td> </td><td class="right">   HEAD response to update the stored response (see Section 3.2).</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="part-14" class="change" ><td></td><th><small>skipping to change at</small><a href="#part-14"><em> page 33, line 31<span class="hide"> &para;</span></em></a></th><th> </th><th><small>skipping to change at</small><a href="#part-14"><em> page 33, line 31<span class="hide"> &para;</span></em></a></th><td></td></tr>
      <tr><td class="lineno"></td><td class="left">   expired").</td><td> </td><td class="right">   expired").</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   If a response includes a Cache-Control header field with the max-age</td><td> </td><td class="right">   If a response includes a Cache-Control header field with the max-age</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   directive (Section 5.2.2.1), a recipient MUST ignore the Expires</td><td> </td><td class="right">   directive (Section 5.2.2.1), a recipient MUST ignore the Expires</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   header field.  Likewise, if a response includes the s-maxage</td><td> </td><td class="right">   header field.  Likewise, if a response includes the s-maxage</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   directive (Section 5.2.2.10), a shared cache recipient MUST ignore</td><td> </td><td class="right">   directive (Section 5.2.2.10), a shared cache recipient MUST ignore</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   the Expires header field.  In both these cases, the value in Expires</td><td> </td><td class="right">   the Expires header field.  In both these cases, the value in Expires</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   is only intended for recipients that have not yet implemented the</td><td> </td><td class="right">   is only intended for recipients that have not yet implemented the</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Cache-Control header field.</td><td> </td><td class="right">   Cache-Control header field.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0036"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   An origin server without a clock MUST NOT generate an Expires header</td><td> </td><td class="rblock">   An origin server without a clock <span class="insert">(Section 5.6.7 of [HTTP])</span> MUST NOT</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   field unless its value represents a fixed time in the past (always</td><td> </td><td class="rblock">   generate an Expires header field unless its value represents a fixed</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   expired) or its value has been associated with the resource by a</td><td> </td><td class="rblock">   time in the past (always expired) or its value has been associated</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   system <span class="delete">or user</span> with a <span class="delete">reliable</span> clock.</td><td> </td><td class="rblock">   with the resource by a system with a clock.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Historically, HTTP required the Expires field value to be no more</td><td> </td><td class="right">   Historically, HTTP required the Expires field value to be no more</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   than a year in the future.  While longer freshness lifetimes are no</td><td> </td><td class="right">   than a year in the future.  While longer freshness lifetimes are no</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   longer prohibited, extremely large values have been demonstrated to</td><td> </td><td class="right">   longer prohibited, extremely large values have been demonstrated to</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   cause problems (e.g., clock overflows due to use of 32-bit integers</td><td> </td><td class="right">   cause problems (e.g., clock overflows due to use of 32-bit integers</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   for time values), and many caches will evict a response far sooner</td><td> </td><td class="right">   for time values), and many caches will evict a response far sooner</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   than that.</td><td> </td><td class="right">   than that.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">5.4.  Pragma</td><td> </td><td class="right">5.4.  Pragma</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="part-15" class="change" ><td></td><th><small>skipping to change at</small><a href="#part-15"><em> page 35, line 22<span class="hide"> &para;</span></em></a></th><th> </th><th><small>skipping to change at</small><a href="#part-15"><em> page 35, line 22<span class="hide"> &para;</span></em></a></th><td></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Caches expose an additional attack surface, since the contents of the</td><td> </td><td class="right">   Caches expose an additional attack surface, since the contents of the</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   cache represent an attractive target for malicious exploitation.</td><td> </td><td class="right">   cache represent an attractive target for malicious exploitation.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Because cache contents persist after an HTTP request is complete, an</td><td> </td><td class="right">   Because cache contents persist after an HTTP request is complete, an</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   attack on the cache can reveal information long after a user believes</td><td> </td><td class="right">   attack on the cache can reveal information long after a user believes</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   that the information has been removed from the network.  Therefore,</td><td> </td><td class="right">   that the information has been removed from the network.  Therefore,</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   cache contents need to be protected as sensitive information.</td><td> </td><td class="right">   cache contents need to be protected as sensitive information.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   In particular, because private caches are restricted to a single</td><td> </td><td class="right">   In particular, because private caches are restricted to a single</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   user, they can be used to reconstruct a user's activity.  As a</td><td> </td><td class="right">   user, they can be used to reconstruct a user's activity.  As a</td><td class="lineno"></td></tr>
      <tr id="diff0037"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   result, is important for user agents to allow end users to control</td><td> </td><td class="rblock">   result, i<span class="insert">t i</span>s important for user agents to allow end users to control</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   them; for example, allowing stored responses to be removed for some</td><td> </td><td class="right">   them; for example, allowing stored responses to be removed for some</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   or all origin servers.</td><td> </td><td class="right">   or all origin servers.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">7.1.  Cache Poisoning</td><td> </td><td class="right">7.1.  Cache Poisoning</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Storing a malicious payload in a cache can extend the reach of an</td><td> </td><td class="right">   Storing a malicious payload in a cache can extend the reach of an</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   attacker to affect multiple users.  Such "cache poisoning" attacks</td><td> </td><td class="right">   attacker to affect multiple users.  Such "cache poisoning" attacks</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   happen when an attacker uses implementation flaws, elevated</td><td> </td><td class="right">   happen when an attacker uses implementation flaws, elevated</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   privileges, or other techniques to insert a response into a cache.</td><td> </td><td class="right">   privileges, or other techniques to insert a response into a cache.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   This is especially effective when shared caches are used to</td><td> </td><td class="right">   This is especially effective when shared caches are used to</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="part-16" class="change" ><td></td><th><small>skipping to change at</small><a href="#part-16"><em> page 38, line 7<span class="hide"> &para;</span></em></a></th><th> </th><th><small>skipping to change at</small><a href="#part-16"><em> page 38, line 7<span class="hide"> &para;</span></em></a></th><td></td></tr>
      <tr><td class="lineno"></td><td class="left">   Please add a note to the "Hypertext Transfer Protocol (HTTP) Warn</td><td> </td><td class="right">   Please add a note to the "Hypertext Transfer Protocol (HTTP) Warn</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Codes" registry at &lt;https://www.iana.org/assignments/http-warn-codes&gt;</td><td> </td><td class="right">   Codes" registry at &lt;https://www.iana.org/assignments/http-warn-codes&gt;</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   to the effect that Warning is obsoleted.</td><td> </td><td class="right">   to the effect that Warning is obsoleted.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">9.  References</td><td> </td><td class="right">9.  References</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">9.1.  Normative References</td><td> </td><td class="right">9.1.  Normative References</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   [HTTP]     Fielding, R., Ed., Nottingham, M., Ed., and J. Reschke,</td><td> </td><td class="right">   [HTTP]     Fielding, R., Ed., Nottingham, M., Ed., and J. Reschke,</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">              Ed., "HTTP Semantics", Work in Progress, Internet-Draft,</td><td> </td><td class="right">              Ed., "HTTP Semantics", Work in Progress, Internet-Draft,</td><td class="lineno"></td></tr>
      <tr id="diff0038"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">              <span class="delete">draft-ietf-httpbis-semantics-17, 26 July 2021,</span></td><td> </td><td class="rblock">              <span class="insert">draft-ietf-httpbis-semantics-18, 18 August</span> 2021,</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">              &lt;https://datatracker.ietf.org/doc/html/draft-ietf-httpbis-</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">              semantics-17&gt;.</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete"></span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   [HTTP/1.1] Fielding, R., Ed., Nottingham, M., Ed., and J. Reschke,</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">              Ed., "HTTP/1.1", Work in Progress, Internet-Draft, draft-</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">              ietf-httpbis-messaging-17, 26 July</span> 2021,</td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">              &lt;https://datatracker.ietf.org/doc/html/draft-ietf-httpbis-</td><td> </td><td class="right">              &lt;https://datatracker.ietf.org/doc/html/draft-ietf-httpbis-</td><td class="lineno"></td></tr>
      <tr id="diff0039"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">              <span class="delete">messaging-17</span>&gt;.</td><td> </td><td class="rblock">              <span class="insert">semantics-18</span>&gt;.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   [RFC2119]  Bradner, S., "Key words for use in RFCs to Indicate</td><td> </td><td class="right">   [RFC2119]  Bradner, S., "Key words for use in RFCs to Indicate</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">              Requirement Levels", BCP 14, RFC 2119,</td><td> </td><td class="right">              Requirement Levels", BCP 14, RFC 2119,</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">              DOI 10.17487/RFC2119, March 1997,</td><td> </td><td class="right">              DOI 10.17487/RFC2119, March 1997,</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">              &lt;https://www.rfc-editor.org/info/rfc2119&gt;.</td><td> </td><td class="right">              &lt;https://www.rfc-editor.org/info/rfc2119&gt;.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   [RFC5234]  Crocker, D., Ed. and P. Overell, "Augmented BNF for Syntax</td><td> </td><td class="right">   [RFC5234]  Crocker, D., Ed. and P. Overell, "Augmented BNF for Syntax</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">              Specifications: ABNF", STD 68, RFC 5234,</td><td> </td><td class="right">              Specifications: ABNF", STD 68, RFC 5234,</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">              DOI 10.17487/RFC5234, January 2008,</td><td> </td><td class="right">              DOI 10.17487/RFC5234, January 2008,</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">              &lt;https://www.rfc-editor.org/info/rfc5234&gt;.</td><td> </td><td class="right">              &lt;https://www.rfc-editor.org/info/rfc5234&gt;.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="part-17" class="change" ><td></td><th><small>skipping to change at</small><a href="#part-17"><em> page 38, line 41<span class="hide"> &para;</span></em></a></th><th> </th><th><small>skipping to change at</small><a href="#part-17"><em> page 38, line 35<span class="hide"> &para;</span></em></a></th><td></td></tr>
      <tr><td class="lineno"></td><td class="left">   [RFC8174]  Leiba, B., "Ambiguity of Uppercase vs Lowercase in RFC</td><td> </td><td class="right">   [RFC8174]  Leiba, B., "Ambiguity of Uppercase vs Lowercase in RFC</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">              2119 Key Words", BCP 14, RFC 8174, DOI 10.17487/RFC8174,</td><td> </td><td class="right">              2119 Key Words", BCP 14, RFC 8174, DOI 10.17487/RFC8174,</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">              May 2017, &lt;https://www.rfc-editor.org/info/rfc8174&gt;.</td><td> </td><td class="right">              May 2017, &lt;https://www.rfc-editor.org/info/rfc8174&gt;.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">9.2.  Informative References</td><td> </td><td class="right">9.2.  Informative References</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   [COOKIE]   Barth, A., "HTTP State Management Mechanism", RFC 6265,</td><td> </td><td class="right">   [COOKIE]   Barth, A., "HTTP State Management Mechanism", RFC 6265,</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">              DOI 10.17487/RFC6265, April 2011,</td><td> </td><td class="right">              DOI 10.17487/RFC6265, April 2011,</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">              &lt;https://www.rfc-editor.org/info/rfc6265&gt;.</td><td> </td><td class="right">              &lt;https://www.rfc-editor.org/info/rfc6265&gt;.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0040"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock">   <span class="insert">[HTTP/1.1] Fielding, R., Ed., Nottingham, M., Ed., and J. Reschke,</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">              Ed., "HTTP/1.1", Work in Progress, Internet-Draft, draft-</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">              ietf-httpbis-messaging-18, 18 August 2021,</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">              &lt;https://datatracker.ietf.org/doc/html/draft-ietf-httpbis-</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">              messaging-18&gt;.</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock">                                                                                </td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   [RFC2616]  Fielding, R., Gettys, J., Mogul, J., Frystyk, H.,</td><td> </td><td class="right">   [RFC2616]  Fielding, R., Gettys, J., Mogul, J., Frystyk, H.,</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">              Masinter, L., Leach, P., and T. Berners-Lee, "Hypertext</td><td> </td><td class="right">              Masinter, L., Leach, P., and T. Berners-Lee, "Hypertext</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">              Transfer Protocol -- HTTP/1.1", RFC 2616,</td><td> </td><td class="right">              Transfer Protocol -- HTTP/1.1", RFC 2616,</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">              DOI 10.17487/RFC2616, June 1999,</td><td> </td><td class="right">              DOI 10.17487/RFC2616, June 1999,</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">              &lt;https://www.rfc-editor.org/info/rfc2616&gt;.</td><td> </td><td class="right">              &lt;https://www.rfc-editor.org/info/rfc2616&gt;.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   [RFC5861]  Nottingham, M., "HTTP Cache-Control Extensions for Stale</td><td> </td><td class="right">   [RFC5861]  Nottingham, M., "HTTP Cache-Control Extensions for Stale</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">              Content", RFC 5861, DOI 10.17487/RFC5861, April 2010,</td><td> </td><td class="right">              Content", RFC 5861, DOI 10.17487/RFC5861, April 2010,</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">              &lt;https://www.rfc-editor.org/info/rfc5861&gt;.</td><td> </td><td class="right">              &lt;https://www.rfc-editor.org/info/rfc5861&gt;.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0041"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   <span class="delete">[RFC5905]  Mills, D., Martin, J., Ed., Burbank, J., and W. Kasch,</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">              "Network Time Protocol Version 4: Protocol and Algorithms</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">              Specification", RFC 5905, DOI 10.17487/RFC5905, June 2010,</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">              &lt;https://www.rfc-editor.org/info/rfc5905&gt;.</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">                                                                                </td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   [RFC7234]  Fielding, R., Ed., Nottingham, M., Ed., and J. F. Reschke,</td><td> </td><td class="right">   [RFC7234]  Fielding, R., Ed., Nottingham, M., Ed., and J. F. Reschke,</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">              Ed., "Hypertext Transfer Protocol (HTTP): Caching",</td><td> </td><td class="right">              Ed., "Hypertext Transfer Protocol (HTTP): Caching",</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">              RFC 7234, DOI 10.17487/RFC7234, June 2014,</td><td> </td><td class="right">              RFC 7234, DOI 10.17487/RFC7234, June 2014,</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">              &lt;https://www.rfc-editor.org/info/rfc7234&gt;.</td><td> </td><td class="right">              &lt;https://www.rfc-editor.org/info/rfc7234&gt;.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   [RFC8126]  Cotton, M., Leiba, B., and T. Narten, "Guidelines for</td><td> </td><td class="right">   [RFC8126]  Cotton, M., Leiba, B., and T. Narten, "Guidelines for</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">              Writing an IANA Considerations Section in RFCs", BCP 26,</td><td> </td><td class="right">              Writing an IANA Considerations Section in RFCs", BCP 26,</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">              RFC 8126, DOI 10.17487/RFC8126, June 2017,</td><td> </td><td class="right">              RFC 8126, DOI 10.17487/RFC8126, June 2017,</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">              &lt;https://www.rfc-editor.org/info/rfc8126&gt;.</td><td> </td><td class="right">              &lt;https://www.rfc-editor.org/info/rfc8126&gt;.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="part-18" class="change" ><td></td><th><small>skipping to change at</small><a href="#part-18"><em> page 46, line 36<span class="hide"> &para;</span></em></a></th><th> </th><th><small>skipping to change at</small><a href="#part-18"><em> page 46, line 33<span class="hide"> &para;</span></em></a></th><td></td></tr>
      <tr><td class="lineno"></td><td class="left">   issues?q=label%3Acaching+created%3A%3E2021-05-26&gt; for a summary.</td><td> </td><td class="right">   issues?q=label%3Acaching+created%3A%3E2021-05-26&gt; for a summary.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Furthermore:</td><td> </td><td class="right">   Furthermore:</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   *  Addressed Genart last call review comments</td><td> </td><td class="right">   *  Addressed Genart last call review comments</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      (&lt;https://github.com/httpwg/http-core/issues/847&gt;)</td><td> </td><td class="right">      (&lt;https://github.com/httpwg/http-core/issues/847&gt;)</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   *  In Section 4.3.4, clarify that only selectable responses are</td><td> </td><td class="right">   *  In Section 4.3.4, clarify that only selectable responses are</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      updated (&lt;https://github.com/httpwg/http-core/issues/839&gt;)</td><td> </td><td class="right">      updated (&lt;https://github.com/httpwg/http-core/issues/839&gt;)</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0042"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">C.19.  Since draft-ietf-httpbis-cache-17</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   *  Made reference to [HTTP/1.1] informative only</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">      (&lt;https://github.com/httpwg/http-core/issues/911&gt;)</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   *  Move cache-related aspects of validator use from [HTTP] into</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">      Section 4.3.1 (&lt;https://github.com/httpwg/http-core/issues/933&gt;)</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   *  Use term "clock" defined in Section 6.6.1 of [HTTP] throughout</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">      (&lt;https://github.com/httpwg/http-core/issues/953&gt;)</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   *  Throughout, disambiguate "selected representation" and "selected</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">      response" (now "chosen response") (&lt;https://github.com/httpwg/</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">      http-core/issues/958&gt;)</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock">                                                                                </td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">Acknowledgements</td><td> </td><td class="right">Acknowledgements</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   See Appendix "Acknowledgements" of [HTTP].</td><td> </td><td class="right">   See Appendix "Acknowledgements" of [HTTP].</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">Index</td><td> </td><td class="right">Index</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   A C E F G H M N O P S V W</td><td> </td><td class="right">   A C E F G H M N O P S V W</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      A</td><td> </td><td class="right">      A</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="part-19" class="change" ><td></td><th><small>skipping to change at</small><a href="#part-19"><em> page 48, line 27<span class="hide"> &para;</span></em></a></th><th> </th><th><small>skipping to change at</small><a href="#part-19"><em> page 48, line 39<span class="hide"> &para;</span></em></a></th><td></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">         Pragma header field  Section 5.4</td><td> </td><td class="right">         Pragma header field  Section 5.4</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">         private (cache directive)  Section 5.2.2.7</td><td> </td><td class="right">         private (cache directive)  Section 5.2.2.7</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">         private cache  Section 1</td><td> </td><td class="right">         private cache  Section 1</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">         proxy-revalidate (cache directive)  Section 5.2.2.8</td><td> </td><td class="right">         proxy-revalidate (cache directive)  Section 5.2.2.8</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">         public (cache directive)  Section 5.2.2.9</td><td> </td><td class="right">         public (cache directive)  Section 5.2.2.9</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      S</td><td> </td><td class="right">      S</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">         s-maxage (cache directive)  Section 5.2.2.10</td><td> </td><td class="right">         s-maxage (cache directive)  Section 5.2.2.10</td><td class="lineno"></td></tr>
      <tr id="diff0043"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">         selected response  Section 4.1</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">         shared cache  Section 1</td><td> </td><td class="right">         shared cache  Section 1</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">         stale  Section 4.2</td><td> </td><td class="right">         stale  Section 4.2</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      V</td><td> </td><td class="right">      V</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">         validator  Section 4.3.1</td><td> </td><td class="right">         validator  Section 4.3.1</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      W</td><td> </td><td class="right">      W</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">         Warning header field  Section 5.5</td><td> </td><td class="right">         Warning header field  Section 5.5</td><td class="lineno"></td></tr>

     <tr><td></td><td class="left"></td><td> </td><td class="right"></td><td></td></tr>
     <tr id="end" bgcolor="gray"><th colspan="5" align="center">&nbsp;End of changes. 43 change blocks.&nbsp;</th></tr>
     <tr class="stats"><td></td><th><i>95 lines changed or deleted</i></th><th><i> </i></th><th><i>120 lines changed or added</i></th><td></td></tr>
     <tr><td colspan="5" align="center" class="small"><br/>This html diff was produced by rfcdiff 1.46. The latest version is available from <a href="http://www.tools.ietf.org/tools/rfcdiff/" >http://tools.ietf.org/tools/rfcdiff/</a> </td></tr>
   </table>
   </body>
   </html>
